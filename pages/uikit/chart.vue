<script setup>
const { layoutConfig } = useLayout()
let documentStyle = getComputedStyle(document.documentElement)
let textColor = documentStyle.getPropertyValue('--text-color')
let textColorSecondary = documentStyle.getPropertyValue('--text-color-secondary')
let surfaceBorder = documentStyle.getPropertyValue('--surface-border')

const lineData = ref(null)
const pieData = ref(null)
const polarData = ref(null)
const barData = ref(null)
const radarData = ref(null)

const lineOptions = ref(null)
const pieOptions = ref(null)
const polarOptions = ref(null)
const barOptions = ref(null)
const radarOptions = ref(null)

function setColorOptions() {
  documentStyle = getComputedStyle(document.documentElement)
  textColor = documentStyle.getPropertyValue('--text-color')
  textColorSecondary = documentStyle.getPropertyValue('--text-color-secondary')
  surfaceBorder = documentStyle.getPropertyValue('--surface-border')
}

function setChart() {
  barData.value = {
    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
    datasets: [
      {
        label: 'My First dataset',
        backgroundColor: documentStyle.getPropertyValue('--primary-500'),
        borderColor: documentStyle.getPropertyValue('--primary-500'),
        data: [65, 59, 80, 81, 56, 55, 40],
      },
      {
        label: 'My Second dataset',
        backgroundColor: documentStyle.getPropertyValue('--primary-200'),
        borderColor: documentStyle.getPropertyValue('--primary-200'),
        data: [28, 48, 40, 19, 86, 27, 90],
      },
    ],
  }
  barOptions.value = {
    plugins: {
      legend: {
        labels: {
          fontColor: textColor,
        },
      },
    },
    scales: {
      x: {
        ticks: {
          color: textColorSecondary,
          font: {
            weight: 500,
          },
        },
        grid: {
          display: false,
          drawBorder: false,
        },
      },
      y: {
        ticks: {
          color: textColorSecondary,
        },
        grid: {
          color: surfaceBorder,
          drawBorder: false,
        },
      },
    },
  }

  pieData.value = {
    labels: ['A', 'B', 'C'],
    datasets: [
      {
        data: [540, 325, 702],
        backgroundColor: [documentStyle.getPropertyValue('--indigo-500'), documentStyle.getPropertyValue('--purple-500'), documentStyle.getPropertyValue('--teal-500')],
        hoverBackgroundColor: [documentStyle.getPropertyValue('--indigo-400'), documentStyle.getPropertyValue('--purple-400'), documentStyle.getPropertyValue('--teal-400')],
      },
    ],
  }

  pieOptions.value = {
    plugins: {
      legend: {
        labels: {
          usePointStyle: true,
          color: textColor,
        },
      },
    },
  }

  lineData.value = {
    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
    datasets: [
      {
        label: 'First Dataset',
        data: [65, 59, 80, 81, 56, 55, 40],
        fill: false,
        backgroundColor: documentStyle.getPropertyValue('--primary-500'),
        borderColor: documentStyle.getPropertyValue('--primary-500'),
        tension: 0.4,
      },
      {
        label: 'Second Dataset',
        data: [28, 48, 40, 19, 86, 27, 90],
        fill: false,
        backgroundColor: documentStyle.getPropertyValue('--primary-200'),
        borderColor: documentStyle.getPropertyValue('--primary-200'),
        tension: 0.4,
      },
    ],
  }

  lineOptions.value = {
    plugins: {
      legend: {
        labels: {
          fontColor: textColor,
        },
      },
    },
    scales: {
      x: {
        ticks: {
          color: textColorSecondary,
        },
        grid: {
          color: surfaceBorder,
          drawBorder: false,
        },
      },
      y: {
        ticks: {
          color: textColorSecondary,
        },
        grid: {
          color: surfaceBorder,
          drawBorder: false,
        },
      },
    },
  }

  polarData.value = {
    datasets: [
      {
        data: [11, 16, 7, 3],
        backgroundColor: [documentStyle.getPropertyValue('--indigo-500'), documentStyle.getPropertyValue('--purple-500'), documentStyle.getPropertyValue('--teal-500'), documentStyle.getPropertyValue('--orange-500')],
        label: 'My dataset',
      },
    ],
    labels: ['Indigo', 'Purple', 'Teal', 'Orange'],
  }

  polarOptions.value = {
    plugins: {
      legend: {
        labels: {
          color: textColor,
        },
      },
    },
    scales: {
      r: {
        grid: {
          color: surfaceBorder,
        },
      },
    },
  }

  radarData.value = {
    labels: ['Eating', 'Drinking', 'Sleeping', 'Designing', 'Coding', 'Cycling', 'Running'],
    datasets: [
      {
        label: 'My First dataset',
        borderColor: documentStyle.getPropertyValue('--indigo-400'),
        pointBackgroundColor: documentStyle.getPropertyValue('--indigo-400'),
        pointBorderColor: documentStyle.getPropertyValue('--indigo-400'),
        pointHoverBackgroundColor: textColor,
        pointHoverBorderColor: documentStyle.getPropertyValue('--indigo-400'),
        data: [65, 59, 90, 81, 56, 55, 40],
      },
      {
        label: 'My Second dataset',
        borderColor: documentStyle.getPropertyValue('--purple-400'),
        pointBackgroundColor: documentStyle.getPropertyValue('--purple-400'),
        pointBorderColor: documentStyle.getPropertyValue('--purple-400'),
        pointHoverBackgroundColor: textColor,
        pointHoverBorderColor: documentStyle.getPropertyValue('--purple-400'),
        data: [28, 48, 40, 19, 96, 27, 100],
      },
    ],
  }

  radarOptions.value = {
    plugins: {
      legend: {
        labels: {
          fontColor: textColor,
        },
      },
    },
    scales: {
      r: {
        grid: {
          color: textColorSecondary,
        },
      },
    },
  }
}

watch(
  layoutConfig.theme,
  () => {
    setColorOptions()
    setChart()
  },
  { immediate: true },
)
</script>

<template>
  <div class="p-fluid grid">
    <div class="col-12 xl:col-6">
      <div class="card">
        <h5>Linear Chart</h5>
        <Chart type="line" :data="lineData" :options="lineOptions" />
      </div>
    </div>
    <div class="col-12 xl:col-6">
      <div class="card">
        <h5>Bar Chart</h5>
        <Chart type="bar" :data="barData" :options="barOptions" />
      </div>
    </div>
    <div class="col-12 xl:col-6">
      <div class="card flex-column align-items-center flex">
        <h5 class="w-full text-left">
          Pie Chart
        </h5>
        <Chart type="pie" :data="pieData" :options="pieOptions" />
      </div>
    </div>
    <div class="col-12 xl:col-6">
      <div class="card flex-column align-items-center flex">
        <h5 class="w-full text-left">
          Doughnut Chart
        </h5>
        <Chart type="doughnut" :data="pieData" :options="pieOptions" />
      </div>
    </div>
    <div class="col-12 xl:col-6">
      <div class="card flex-column align-items-center flex">
        <h5 class="w-full text-left">
          Polar Area Chart
        </h5>
        <Chart type="polarArea" :data="polarData" :options="polarOptions" />
      </div>
    </div>
    <div class="col-12 xl:col-6">
      <div class="card flex-column align-items-center flex">
        <h5 class="w-full text-left">
          Radar Chart
        </h5>
        <Chart type="radar" :data="radarData" :options="radarOptions" />
      </div>
    </div>
  </div>
</template>
